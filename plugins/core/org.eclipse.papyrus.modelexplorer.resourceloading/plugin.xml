<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
<extension point="org.eclipse.ui.menus">
	<!-- ModelExplorer Contextual menu -->  
  <menuContribution
       allPopups="false"
       locationURI="popup:org.eclipse.papyrus.modelexplorer.modelexplorer.popup?after=org.eclipse.papyrus.modelexplorer.modelexplorer.popup.paste">
    <separator
          name="popup:org.eclipse.papyrus.modelexplorer.modelexplorer.popup.loadSeparator"
          visible="true">
    </separator>
    <command
          commandId="org.eclipse.papyrus.modelexplorer.resourceloading.LoadAllResources"
          icon="icons/LoadResource.gif"
          label="Load"
          style="push"
          tooltip="Load Resource containing this object">
       <visibleWhen
             checkEnabled="true">
       </visibleWhen>
    </command>
    <command
          commandId="org.eclipse.papyrus.modelexplorer.resourceloading.UnloadAllResources"
          icon="icons/UnloadResource.gif"
          label="Unload"
          style="push"
          tooltip="Unload Resource containing this object">
       <visibleWhen
             checkEnabled="true">
       </visibleWhen>
    </command>
    <command
          commandId="org.eclipse.papyrus.modelexplorer.resourceloading.LoadAssociatedNotation"
          icon="icons/LoadResource.gif"
          label="Load Diagrams"
          style="push"
          tooltip="Load the Diagrams resource (.notation) associated with this object">
    <visibleWhen
          checkEnabled="true">
     </visibleWhen>
    </command>
    <command
          commandId="org.eclipse.papyrus.modelexplorer.resourceloading.LoadAssociatedDi"
          icon="icons/LoadResource.gif"
          label="Load Tables/Sash"
          style="push"
          tooltip="Load the Tables/Sash resource (.di) associated with this object">
    <visibleWhen
          checkEnabled="true">
     </visibleWhen>
    </command>
  </menuContribution>     
</extension>

<!-- Command declarations (for model explorer toolbar and contextual menu -->
<extension point="org.eclipse.ui.commands">
	<!-- Command declaration : Load resource command -->
	<command id="org.eclipse.papyrus.modelexplorer.resourceloading.LoadAllResources"
		name="Load" description="Load Resource containing this object"	
		categoryId="org.eclipse.papyrus.editor.category">
	</command>
	<command id="org.eclipse.papyrus.modelexplorer.resourceloading.UnloadAllResources"
		name="Unload" description="Unload Resource containing this object"	
		categoryId="org.eclipse.papyrus.editor.category">
	</command>
 <command
       categoryId="org.eclipse.papyrus.editor.category"
       description="Load the Diagrams resource (.notation) associated with this object"
       id="org.eclipse.papyrus.modelexplorer.resourceloading.LoadAssociatedNotation"
       name="Load Diagrams">
 </command>
 <command
       categoryId="org.eclipse.papyrus.editor.category"
       description="Load the Tables/Sash resource (.di) associated with this object"
       id="org.eclipse.papyrus.modelexplorer.resourceloading.LoadAssociatedDi"
       name="Load Tables/Sash">
 </command>
</extension>

<!-- This handler is activated when deleteInModelExplorer variable is valid.
  -->
<extension point="org.eclipse.ui.handlers">
	<handler commandId="org.eclipse.papyrus.modelexplorer.resourceloading.LoadAllResources" class="org.eclipse.papyrus.modelexplorer.resourceloading.handler.LoadAllResourcesHandler">
		<activeWhen>
         <with
               variable="selection">
          <test
               forcePluginActivation="true"
               property="org.eclipse.papyrus.core.resourceloading.tester.isAllNotLoaded"
               value="true" />
         </with>
		</activeWhen>
	</handler>
	<handler commandId="org.eclipse.papyrus.modelexplorer.resourceloading.UnloadAllResources" class="org.eclipse.papyrus.modelexplorer.resourceloading.handler.UnloadAllResourcesHandler">
		<activeWhen>
         <with
               variable="selection">
          <test
               forcePluginActivation="true"
               property="org.eclipse.papyrus.core.resourceloading.tester.isAllLoaded"
               value="true" />
         </with>
		</activeWhen>
	</handler>
 <handler
       class="org.eclipse.papyrus.modelexplorer.resourceloading.handler.LoadAssociatedNotationHandler"
       commandId="org.eclipse.papyrus.modelexplorer.resourceloading.LoadAssociatedNotation">
    <activeWhen>
              <with
                variable="selection">
             <test
                   args="notation"
                   forcePluginActivation="true"
                   property="org.eclipse.papyrus.core.resourceloading.tester.isAssociatedResourceLoaded"
                   value="false">
             </test>
          </with>
     </activeWhen>
 </handler>
 <handler
       class="org.eclipse.papyrus.modelexplorer.resourceloading.handler.LoadAssociatedDiHandler"
       commandId="org.eclipse.papyrus.modelexplorer.resourceloading.LoadAssociatedDi">
    <activeWhen>
              <with
                variable="selection">
             <test
                   args="di"
                   forcePluginActivation="true"
                   property="org.eclipse.papyrus.core.resourceloading.tester.isAssociatedResourceLoaded"
                   value="false">
             </test>
          </with>
     </activeWhen>
 </handler>
</extension>

</plugin>
