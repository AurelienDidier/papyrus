<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.papyrus.infra.core.model">
      <model
            classname="org.eclipse.papyrus.infra.table.efacet.common.modelresource.PapyrusTableModelResource"
            description="Model Resource for Papyrus Table EFacet ">
      </model>
   </extension>
<extension id="papyrus.table.menuspapyrus.table.menu" name="Papyrus Table Menus" point="org.eclipse.ui.menus">
      <menuContribution allPopups="false" locationURI="popup:org.eclipse.papyrus.views.modelexplorer.modelexplorer.popup?after=org.eclipse.papyrus.views.modelexplorer.popupmenu.creatediagram">
         <menu icon="icons/table.gif" id="org.eclipse.papyrus.views.modelexplorer.popupmenu.table.efacet.creation" label="New EFacet Table" mnemonic="&amp;T" tooltip="The table menu">
         </menu>
      </menuContribution>
      <menuContribution allPopups="false" locationURI="menu:org.eclipse.papyrus.ui.menu?after=org.eclipse.papyrus.uml.diagram.ui.menu.diagrams">
         <menu icon="icons/table.gif" id="org.eclipse.papyrus.ui.menu.efacet.table.creation" label="EFacet Tables" mnemonic="&amp;T" tooltip="The table menu">
         </menu>
      </menuContribution>
      <menuContribution locationURI="toolbar:org.eclipse.ui.main.toolbar?endof=org.eclipse.papyrus.uml.diagram.ui.toolbar">
         <toolbar id="org.eclipse.papyrus.toolbar.table.efacet.creation" label="Papyrus EFacet Table Toolbar">
         </toolbar>
      </menuContribution>
   </extension>
 <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.emf.facet.widgets.table.command.category"
            description="Move the line up"
            id="org.eclipse.papyrus.infra.table.efacet.common.command.moveuprow"
            name="Move Line Up">
      </command>
      <command
            categoryId="org.eclipse.emf.facet.widgets.table.command.category"
            description="Move the line down"
            id="org.eclipse.papyrus.infra.table.efacet.common.command.movedownrow"
            name="Move Line Down">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any">
         <command
               commandId="org.eclipse.papyrus.infra.table.efacet.common.command.moveuprow"
               icon="icons/up.gif"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="activeEditorId">
                     <equals
                           value="org.eclipse.papyrus.infra.core.papyrusEditor">
                     </equals>
                  </with>
                  <with
                        variable="activePart">
                     <test
                           forcePluginActivation="true"
                           property="org.eclipse.papyrus.infra.table.efacet.common.propertyTester.isPapyrusTableEfacet"
                           value="true">
                     </test>
                  </with>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.papyrus.infra.table.efacet.common.command.movedownrow"
               icon="icons/down.gif"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="activeEditorId">
                     <equals
                           value="org.eclipse.papyrus.infra.core.papyrusEditor">
                     </equals>
                  </with>
                  <with
                        variable="activePart">
                     <test
                           forcePluginActivation="true"
                           property="org.eclipse.papyrus.infra.table.efacet.common.propertyTester.isPapyrusTableEfacet"
                           value="true">
                     </test>
                  </with>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.papyrus.infra.table.efacet.common.handlers.DownRowHandler"
            commandId="org.eclipse.papyrus.infra.table.efacet.common.command.movedownrow">
      </handler>
      <handler
            class="org.eclipse.papyrus.infra.table.efacet.common.handlers.UpRowHandler"
            commandId="org.eclipse.papyrus.infra.table.efacet.common.command.moveuprow">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.papyrus.infra.table.efacet.common.command.moveuprow"
            contextId="org.eclipse.papyrus.infra.table.efacet.common.context"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+ARROW_UP">
      </key>
      <key
            commandId="org.eclipse.papyrus.infra.table.efacet.common.command.movedownrow"
            contextId="org.eclipse.papyrus.infra.table.efacet.common.context"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+ARROW_DOWN">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            description="Papyrus Table Context"
            id="org.eclipse.papyrus.infra.table.efacet.common.context"
            name="Papyrus Table Context"
            parentId="org.eclipse.ui.contexts.window">
      </context>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.eclipse.papyrus.infra.table.efacet.common.tester.TablePropertyTester"
            id="org.eclipse.papyrus.infra.table.efacet.common.propertyTester"
            namespace="org.eclipse.papyrus.infra.table.efacet.common.propertyTester"
            properties="isPapyrusTableEfacet"
            type="org.eclipse.ui.IWorkbenchPart">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.emf.facet.widgets.celleditors.commandFactories">
      <commandFactory
            class="org.eclipse.papyrus.infra.table.efacet.common.factory.PapyrusCommandFactory">
      </commandFactory>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            class="org.eclipse.papyrus.infra.table.efacet.common.menu.CreateNewElementInPopupContributionItem"
            locationURI="popup:org.eclipse.ui.popup.any">
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.papyrus.editor.category"
            description="Open a dialog to select the columns to display"
            id="org.eclipse.papyrus.infra.table.efacet.common.selectvisiblecolumns"
            name="Select the columns to Show">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any">
         <command
               commandId="org.eclipse.papyrus.infra.table.efacet.common.selectvisiblecolumns"
               icon="icons/select_columns_to_show.png"
               label="Select the columns to show"
               style="push"
               tooltip="Open a dialog to choose the visible columns">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.ui.edit.paste"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
</plugin>
