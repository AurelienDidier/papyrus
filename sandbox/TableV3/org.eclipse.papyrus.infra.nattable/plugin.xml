<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="org.eclipse.papyrus.infra.nattable.axismanager" name="Axis Manager" schema="schema/org.eclipse.papyrus.infra.nattable.axismanager.exsd"/>
   <extension-point id="org.eclipse.papyrus.infra.nattable.cellmanager" name="Cell Manager" schema="schema/org.eclipse.papyrus.infra.nattable.cellmanager.exsd"/>
   <extension-point id="org.eclipse.papyrus.infra.nattable.celleditor.configuration" name="CellEditorConfiguration" schema="schema/org.eclipse.papyrus.infra.nattable.celleditor.configuration.exsd"/>

 <extension
       point="org.eclipse.papyrus.infra.nattable.axismanager">
    <axisManager
          id="org.eclipse.papyrus.infra.nattable.emf.user.provider"
          manager="org.eclipse.papyrus.infra.nattable.manager.EObjectManager">
    </axisManager>
    <axisManager
          id="org.eclipse.papyrus.infra.nattable.emf.feature.provider"
          manager="org.eclipse.papyrus.infra.nattable.manager.FeatureManager">
    </axisManager>
 </extension>
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          allPopups="true"
          locationURI="popup:org.eclipse.ui.popup.any">
       <command
             commandId="org.eclipse.ui.file.print"
             label="Print Table"
             mnemonic="&amp;P"
             style="push">
          <visibleWhen>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </visibleWhen>
       </command>
       <command
             commandId="org.eclipse.ui.edit.selectAll"
             style="push">
          <visibleWhen>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </visibleWhen>
       </command>
       <command
             commandId="org.eclipse.papyrus.infra.nattable.exporttoXLScommand"
             style="push">
          <visibleWhen>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </visibleWhen>
       </command>
       <command
             commandId="org.eclipse.papyrus.infra.nattable.sort.columns.command"
             icon="icons/sort_columns_by_name_A_to_Z.gif"
             label="Sort Columns (A-&gt;Z)"
             style="push">
          <parameter
                name="org.eclipse.papyrus.infra.nattable.sort.command.alphabetic.order.parameter"
                value="true">
          </parameter>
          <visibleWhen>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </visibleWhen>
       </command>
       <command
             commandId="org.eclipse.papyrus.infra.nattable.sort.columns.command"
             icon="icons/sort_columns_by_name_Z_to_A.gif"
             label="Sort Columns (Z-&gt;A)"
             style="push">
          <parameter
                name="org.eclipse.papyrus.infra.nattable.sort.command.alphabetic.order.parameter"
                value="false">
          </parameter>
          <visibleWhen>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </visibleWhen>
       </command>
       <command
             commandId="org.eclipse.papyrus.infra.nattable.sort.rows.command"
             icon="icons/sort_columns_by_name_A_to_Z.gif"
             label="Sort Rows (A-&gt;Z)"
             style="push">
          <parameter
                name="org.eclipse.papyrus.infra.nattable.sort.command.alphabetic.order.parameter"
                value="true">
          </parameter>
          <visibleWhen>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </visibleWhen>
       </command>
       <command
             commandId="org.eclipse.papyrus.infra.nattable.sort.rows.command"
             icon="icons/sort_columns_by_name_Z_to_A.gif"
             label="Sort Rows (Z-&gt;A)"
             style="push">
          <parameter
                name="org.eclipse.papyrus.infra.nattable.sort.command.alphabetic.order.parameter"
                value="false">
          </parameter>
          <visibleWhen>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </visibleWhen>
       </command>
    </menuContribution>
 </extension>
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="org.eclipse.papyrus.infra.nattable.actions.PrintTableHandler"
          commandId="org.eclipse.ui.file.print">
       <activeWhen>
          <and>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </and>
       </activeWhen>
    </handler>
    <handler
          class="org.eclipse.papyrus.infra.nattable.actions.SelectAllHandler"
          commandId="org.eclipse.ui.edit.selectAll">
       <activeWhen>
          <and>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </and>
       </activeWhen>
    </handler>
    <handler
          class="org.eclipse.papyrus.infra.nattable.actions.ExportToXLSHandler"
          commandId="org.eclipse.papyrus.infra.nattable.exporttoXLScommand">
       <activeWhen>
          <and>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </and>
       </activeWhen>
    </handler>
    <handler
          class="org.eclipse.papyrus.infra.nattable.copy.CopySelectionToClipboardAction"
          commandId="org.eclipse.ui.edit.copy">
       <activeWhen>
          <and>
             <with
                   variable="selection">
                <test
                      forcePluginActivation="true"
                      property="org.eclipse.papyrus.infra.nattable.tester.isNattableWidget"
                      value="true">
                </test>
             </with>
          </and>
       </activeWhen>
    </handler>
 </extension>
 <extension
       point="org.eclipse.core.expressions.propertyTesters">
    <propertyTester
          class="org.eclipse.papyrus.infra.nattable.utils.NattableWidgetPropertyTester"
          id="org.eclipse.papyrus.infra.nattable.tester"
          namespace="org.eclipse.papyrus.infra.nattable.tester"
          properties="isNattableWidget"
          type="org.eclipse.jface.viewers.IStructuredSelection">
    </propertyTester>
 </extension>
 <extension
       point="org.eclipse.papyrus.infra.nattable.cellmanager">
    <cellManager
          id="org.eclipse.papyrus.infra.nattable.common.emf.feature.cell.manager"
          manager="org.eclipse.papyrus.infra.nattable.solver.CellFeatureValueManager"
          order="40">
    </cellManager>
 </extension>
 <extension
       point="org.eclipse.papyrus.infra.services.labelprovider.labelProvider">
    <context
          description="Context for the headers of the table"
          id="org.eclipse.papyrus.infra.nattable.header.labelprovider">
    </context>
    <context
          description="Context for the body of the table"
          id="org.eclipse.papyrus.infra.nattable.body.labelprovider">
    </context>
    <context
          description="the context to use to find the label provider used to display values in cells and headers"
          id="org.eclipse.papyrus.infra.nattable.full.labelprovider">
    </context>
     <labelProvider
            priority="100"
            provider="org.eclipse.papyrus.infra.nattable.provider.GenericCellLabelProvider">
         <labelProviderContext
               context="org.eclipse.papyrus.infra.nattable.body.labelprovider">
         </labelProviderContext>
      </labelProvider>
 </extension>
 
 <extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypes">

	<metamodel nsURI="http://www.eclipse.org/emf/2002/Ecore">

	<!-- Generalizarion specific advices (remove inconsistent views when a Generalization is deleted -->		
	<adviceBinding id="org.eclipse.papyrus.infra.nattable.common.helper.advice.TableContentsAdviceHelper"
		class="org.eclipse.papyrus.infra.nattable.helper.advice.TableContentsAdviceHelper"
		inheritance="all" typeId="*">
	</adviceBinding>
		
	</metamodel>
</extension>
	
<!-- UML ElementType bindings to Papyrus shared IClientContext -->
<extension point="org.eclipse.gmf.runtime.emf.type.core.elementTypeBindings">

	<!-- Bindings declaration to shared IClientContext -->
	<binding context="org.eclipse.papyrus.infra.services.edit.TypeContext">	
		<elementType ref="org.eclipse.papyrus.infra.nattable.common.helper.advice.TableContentsAdviceHelper"/>
	</binding>
		
</extension>
<extension
      point="org.eclipse.ui.commands">
   <command
         categoryId="org.eclipse.papyrus.editor.category"
         description="Export Table to XLS"
         id="org.eclipse.papyrus.infra.nattable.exporttoXLScommand"
         name="Export Table to XLS Command">
   </command>
   <command
         categoryId="org.eclipse.papyrus.editor.category"
         defaultHandler="org.eclipse.papyrus.infra.nattable.actions.SortColumnsHandler"
         id="org.eclipse.papyrus.infra.nattable.sort.columns.command"
         name="Sort Columns Command">
      <commandParameter
            id="org.eclipse.papyrus.infra.nattable.sort.command.alphabetic.order.parameter"
            name="alphabetic_order"
            optional="false">
      </commandParameter>
   </command>
   <command
         categoryId="org.eclipse.papyrus.editor.category"
         defaultHandler="org.eclipse.papyrus.infra.nattable.actions.SortRowsHandler"
         id="org.eclipse.papyrus.infra.nattable.sort.rows.command"
         name="Sort Rows Command">
      <commandParameter
            id="org.eclipse.papyrus.infra.nattable.sort.command.alphabetic.order.parameter"
            name="alphabetic_order"
            optional="false">
      </commandParameter>
   </command>
</extension>
<extension
      point="org.eclipse.papyrus.infra.services.labelprovider.labelProvider">
   <labelProvider
         priority="200"
         provider="org.eclipse.papyrus.infra.nattable.provider.NattableCellLabelProvider">
      <labelProviderContext
            context="org.eclipse.papyrus.infra.nattable.full.labelprovider">
      </labelProviderContext>
   </labelProvider>
   <labelProvider
         priority="10"
         provider="org.eclipse.papyrus.infra.nattable.provider.TableLabelProvider">
   </labelProvider>
   <context
         description="Context for feature in the header of the axis"
         id="org.eclipse.papyrus.infra.nattable.feature.header.labelprovider">
   </context>
   <labelProvider
         priority="100"
         provider="org.eclipse.papyrus.infra.nattable.provider.IndexHeaderLabelProvider">
      <labelProviderContext
            context="org.eclipse.papyrus.infra.nattable.header.labelprovider">
      </labelProviderContext>
      <labelProviderContext
            context="org.eclipse.papyrus.infra.nattable.feature.header.labelprovider">
      </labelProviderContext>
   </labelProvider>
</extension>
  <extension
         point="org.eclipse.gmf.runtime.emf.type.core.elementTypes">
      <metamodel
            nsURI="http://www.eclipse.org/papyrus/nattable/model">
         <adviceBinding
               class="org.eclipse.papyrus.infra.nattable.advice.DeleteNatTableContextAdvice"
               id="org.eclipse.papyrus.infra.nattable.advice.DeleteNatTableAdvice"
               inheritance="all"
               typeId="*">
         </adviceBinding>
      </metamodel>
   </extension>
   <extension
         point="org.eclipse.gmf.runtime.emf.type.core.elementTypeBindings">
      <binding
            context="org.eclipse.papyrus.infra.services.edit.TypeContext">
         <elementType
               ref="org.eclipse.papyrus.infra.nattable.advice.DeleteNatTableAdvice">
         </elementType>
      </binding>
   </extension>
</plugin>

