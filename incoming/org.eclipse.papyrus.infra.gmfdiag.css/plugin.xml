<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="theme" name="CSS Theme" schema="schema/theme.exsd"/>
	<extension point="org.eclipse.emf.ecore.factory_override">
		<factory
			class="org.eclipse.papyrus.infra.gmfdiag.css.factory.CSSNotationFactory"
			uri="http://www.eclipse.org/gmf/runtime/1.0.2/notation">
		</factory>
	</extension>
	<extension point="org.eclipse.papyrus.infra.core.model">
		<model
			classname="org.eclipse.papyrus.infra.gmfdiag.css.resource.CSSNotationModel"
			description="Notation Model with CSS Support">
		</model>
	</extension>
	<extension point="org.eclipse.ui.handlers">
		<handler
			class="org.eclipse.papyrus.infra.gmfdiag.css.handler.CSSRefreshHandler"
			commandId="org.eclipse.ui.file.refresh">
			<activeWhen>
				<and>
					<with variable="activePartId">
						<equals value="org.eclipse.papyrus.infra.core.papyrusEditor">
						</equals>
					</with>
					<with variable="activeContexts">
						<iterate ifEmpty="false" operator="or">
							<equals value="Papyrus CSS">
							</equals>
						</iterate>
					</with>
				</and>
			</activeWhen>
		</handler>
	</extension>
 <extension
       point="org.eclipse.ui.contexts">
    <context
          description="A context used to indicate that the Papyrus CSS support is available"
          id="Papyrus CSS"
          name="Papyrus CSS context">
    </context>
 </extension>
 <extension
       point="org.eclipse.emf.ecore.generated_package">
    <package
          class="org.eclipse.papyrus.infra.gmfdiag.css.modelstylesheets.ModelStyleSheetsPackage"
          genModel="model/ModelStyleSheets.genmodel"
          uri="http://www.eclipse.org/papyrus/infra/gmfdiag/css">
    </package>
 </extension>
 <extension
       point="org.eclipse.papyrus.infra.emf.appearance.styleProvider">
    <styleprovider
          priority="40"
          styleProvider="org.eclipse.papyrus.infra.gmfdiag.css.provider.CSSAppearanceProvider">
    </styleprovider>
 </extension>
 <extension
       point="org.eclipse.ui.preferencePages">
    <page
          category="org.eclipse.papyrus.infra.core.sasheditor.preferences.generalcategory"
          class="org.eclipse.papyrus.infra.gmfdiag.css.preferences.ThemePreferencesPage"
          id="org.eclipse.papyrus.infra.gmfdiag.css.theme"
          name="CSS Theme">
    </page>
 </extension>
 <extension
       point="org.eclipse.core.runtime.preferences">
    <initializer
          class="org.eclipse.papyrus.infra.gmfdiag.css.preferences.ThemePreferenceInitializer">
    </initializer>
 </extension>
 <extension
       point="org.eclipse.papyrus.infra.gmfdiag.css.theme">
    <themeDefinition
          icon="icons/papyrus.png"
          id="org.eclipse.papyrus.css.papyrus_theme"
          label="Papyrus Theme">
    </themeDefinition>
    <themeContribution
          id="org.eclipse.papyrus.css.papyrus_theme">
       <stylesheet
             stylesheetPath="resources/papyrus_theme.css">
       </stylesheet>
    </themeContribution>
 </extension>
</plugin>
